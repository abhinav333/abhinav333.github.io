<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Interfacing SD with AVR: Part 2 - Abhinav Kulkarni</title>
<meta name="description" content="In this part of the tutorial, we will explore how to wire an SD Card with an ATMEGA16. The SD Card requires a 3.3 V supply, so we will first create a circuit for this purpose. You can use voltage regulators like the LM117 (fixed 3.3 V output) or a variable one like the popular LM317. There is no need for a heatsink for these ICs in this application as the power dissipation is quite small. I prefer using the LM317 (TO-223 package); it can be easily soldered, is readily available, and the circuit requires only a few supplementary passive components. Proceed with the following circuit.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Abhinav Kulkarni">
<meta property="og:title" content="Interfacing SD with AVR: Part 2">
<meta property="og:url" content="http://localhost:4000/embedded%20systems/2014/11/12/sd-card-2.html">


  <meta property="og:description" content="In this part of the tutorial, we will explore how to wire an SD Card with an ATMEGA16. The SD Card requires a 3.3 V supply, so we will first create a circuit for this purpose. You can use voltage regulators like the LM117 (fixed 3.3 V output) or a variable one like the popular LM317. There is no need for a heatsink for these ICs in this application as the power dissipation is quite small. I prefer using the LM317 (TO-223 package); it can be easily soldered, is readily available, and the circuit requires only a few supplementary passive components. Proceed with the following circuit.">







  <meta property="article:published_time" content="2014-11-12T00:00:00-05:00">






<link rel="canonical" href="http://localhost:4000/embedded%20systems/2014/11/12/sd-card-2.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Abhinav Kulkarni Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Abhinav Kulkarni
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/publications/">Publications</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/resources/">Resources</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/photo.jpg" alt="" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Researcher and engineer</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Trois-Rivières, QC, Canada</span>
        </li>
      

      
        
          
            <li><a href="https://github.com/abhinav333" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Interfacing SD with AVR: Part 2">
    <meta itemprop="description" content="In this part of the tutorial, we will explore how to wire an SD Card with an ATMEGA16. The SD Card requires a 3.3 V supply, so we will first create a circuit for this purpose. You can use voltage regulators like the LM117 (fixed 3.3 V output) or a variable one like the popular LM317. There is no need for a heatsink for these ICs in this application as the power dissipation is quite small. I prefer using the LM317 (TO-223 package); it can be easily soldered, is readily available, and the circuit requires only a few supplementary passive components. Proceed with the following circuit.">
    <meta itemprop="datePublished" content="2014-11-12T00:00:00-05:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Interfacing SD with AVR: Part 2
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2014-11-12T00:00:00-05:00">November 12, 2014</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>In this part of the tutorial, we will explore how to wire an SD Card with an ATMEGA16. The SD Card requires a 3.3 V supply, so we will first create a circuit for this purpose. You can use voltage regulators like the LM117 (fixed 3.3 V output) or a variable one like the popular LM317. There is no need for a heatsink for these ICs in this application as the power dissipation is quite small. I prefer using the LM317 (TO-223 package); it can be easily soldered, is readily available, and the circuit requires only a few supplementary passive components. Proceed with the following circuit.</p>

<p><img src="http://4.bp.blogspot.com/-ZGYNqD9oejg/VInXKMh0DWI/AAAAAAAAAF0/BQkbgk6eulo/s1600/LM317-typical-adjustable-regulator-ckt.png" alt="LM317 Circuit" /></p>

<p>Tested with R2 = 360 Ohms and R1 = 240 Ohms.</p>

<p>If you get an output voltage within about 200 millivolts of 3.3 V, it’s perfect! Otherwise, try adjusting the resistor values slightly until you achieve the desired voltage. We have now constructed a power supply for the SD Card. The next step is to build a logic converter circuit to interface the AVR with the SD Card. While it’s not always necessary to have an interface circuit, it becomes essential if the AVR operates at a voltage other than 3.3 V. When not working at the same voltage, the SD Card requires a logic level converter to translate its 3.3 V signal to the AVR and vice versa. There are a couple of methods to build one, but we will use the voltage divider method, which is simple and works in most cases. However, you can explore other methods like the pull resistor method or find a ready-made IC for this purpose.</p>

<p><strong>Voltage Divider Method:</strong></p>

<p><img src="http://3.bp.blogspot.com/-6EYS98w0DM8/VInXTcMeVwI/AAAAAAAAAGA/gwmLUi8Mh7E/s1600/interface.jpg" alt="Voltage Divider" /></p>

<p>With Vs as the primary supply voltage to the system, the calculation of R2 and R1 is pretty simple:</p>

<p>R2 = Vs * (R1 + R2) / (2 * 3.3 V - Vs)</p>

<p>Now, let’s say your microcontroller is working on 5 V; then, the ratio R2 comes out to be twice that of R1:</p>

<p>R2 = 2 * R1</p>

<p>You can try different values for R2 and R1, within the range of 1 KOhm to 50 KOhm. I successfully tested this circuit with R2 = 2.2 KOhm and R1 = 1.1 KOhm.</p>

<p>Once you’ve done that, power the SD Card with the 3.3 V power supply we created using the LM317. You can even design both circuits (supply and logic converter) on the same board, which simplifies the setup.</p>

<p>Usually, we don’t find 9-pin MMC cards in the market nowadays as they have become obsolete. However, there are various microSD cards available, which are compatible with cellphones, mp3 players, and other similar devices. So, you can comfortably use such a microSD card with an adapter (the black one) to serve your purpose. This adapter requires another card socket, which requires careful soldering. Also, its SMD soldering pads are very fine and delicate.</p>

<p><img src="http://2.bp.blogspot.com/-iNkwGUAKXic/VIndu-2cK1I/AAAAAAAAAGM/O1teWl5GqdA/s1600/2gb-tf-and-adapter.jpg" alt="MicroSD with Adapter" /></p>

<p><strong>MicroSD with Adapter</strong></p>

<p><img src="http://4.bp.blogspot.com/-tcwWbrfsOC0/VIndwGQ4x2I/AAAAAAAAAGU/CiJjsTTxKpI/s1600/SD.jpg" alt="SD Card Adapter Socket" /></p>

<p><strong>SD Card Adapter Socket</strong></p>

<p>Here’s a alternative method if you don’t want to deal with SMD connectors. It can save you time, effort, and frustration. Solder a 9 X 1 male berg strip to the pinouts of the adapter, as shown in the figure below. Solder a 9 X 1 female berg strip on your interface circuit as your pinout. This method allows for easy plug-in and removal of the adapter without damaging it.</p>

<p><img src="http://1.bp.blogspot.com/-j3aXOAanOtc/VIngt84gS1I/AAAAAAAAAGo/weFwAZ0ptU4/s1600/20141211-0001.jpeg" alt="Adapter Trick" /></p>

<p><img src="http://1.bp.blogspot.com/-nzfO3KfXAFk/VIngruA24_I/AAAAAAAAAGg/TPKV2EUHdAs/s1600/20141211-0002.jpeg" alt="Adapter Trick" /></p>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2014-11-12T00:00:00-05:00">November 12, 2014</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/embedded%20systems/2014/09/30/sd-card-1.html" class="pagination--pager" title="Interfacing SD with AVR: Part 1
">Previous</a>
    
    
      <a href="/embedded%20systems/2020/08/28/sd-card-3.html" class="pagination--pager" title="Interfacing SD with AVR: Part 3
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

<!--
    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
-->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Abhinav Kulkarni. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
